% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_icc.R
\name{compute_icc}
\alias{compute_icc}
\title{Compute Item Characteristic Curves (ICC)}
\usage{
compute_icc(items, item_par_cols, theta, model_col, nrCat_col = NULL, D = 1)
}
\arguments{
\item{items}{A data frame containing item metadata.
Each row represents an item. The data frame must include a column
specifying the item model (see \code{model_col}) and the parameter
columns referenced in \code{item_par_cols}.}

\item{item_par_cols}{A named list defining the IRT parameter columns
required for each supported model. The list names must exactly match
the model identifiers specified in \code{items[[model_col]]}:
\code{"1PL"}, \code{"RASCH"}, \code{"2PL"}, \code{"3PL"},
\code{"4PL"}, \code{"GRM"}, \code{"MGRM"}, \code{"PCM"},
\code{"GPCM"}, \code{"RSM"}, and \code{"NRM"}.
Each list element is a character vector giving the column names
in \code{items} that contain the required item parameters for
the corresponding model.}

\item{theta}{A numeric vector of ability values at which the
ICCs are evaluated.}

\item{model_col}{A character string specifying the column name in
\code{items} that indicates the IRT model used for each item.
Values in this column must correspond to one of the supported
model names:
\code{"1PL"}, \code{"RASCH"}, \code{"2PL"}, \code{"3PL"},
\code{"4PL"}, \code{"GRM"}, \code{"MGRM"}, \code{"PCM"},
\code{"GPCM"}, \code{"RSM"}, or \code{"NRM"}.}

\item{nrCat_col}{A character string specifying the column name in
\code{items} that indicates the number of response categories for
each items. Default is NULL, the number of response categories is derived
based on item parameters. If not NULL, the number of response categories
is checked with number of item parameters for consistency.}

\item{D}{Scaling constant used in the IRT model. Default is D=1 (for logistic metric);
D=1.702 yields approximately the normal metric.}
}
\value{
A named list of matrices, one for each value in
\code{theta}. List length =  the number of ability values
and List names = Character strings of the form \code{"theta=<value>"}.

Each matrix entry gives the probability of responding in the
corresponding category for the given item at the specified
ability level. Matrix rows = the number of items, with row names equal to item identifiers.
Matrix columns = Response categories labeled
\code{cat0}, \code{cat1}, \dots, \code{catM}.
}
\description{
Computes item category characteristic curves (ICCs) for dichotomous,
polytomous, or mixed-format item pools. The function supports multiple IRT models simultaneously and
returns category-level response probabilities for each item at specified ability points.
}
\details{
The output matrices returned by \code{compute_icc()} include
a fixed set of category columns (\code{cat0}, \code{cat1}, \dots),
with unused categories filled with zeros to ensure consistent dimensions
across mixed-format item pools.

(1) \strong{Dichotomous models.}

For the models \code{"1PL"}, \code{"RASCH"}, \code{"2PL"}, \code{"3PL"},
and \code{"4PL"}, item parameters are extended to the following four
columns:
\describe{
\item{\code{discrimination}}{Slope parameter (\eqn{a}).}
\item{\code{difficulty}}{Location parameter (\eqn{b}).}
\item{\code{guessing}}{Lower asymptote (\eqn{c}).}
\item{\code{upper}}{Upper asymptote (\eqn{d}).}
}

Missing parameters required for a given model are automatically filled. For example, the RASCH and 1PL
models are represented with \eqn{a = 1}, \eqn{c = 0}, and \eqn{d = 1}.

All dichotomous item parameters are validated prior to ICC computation:
\itemize{
\item \code{discrimination > 0}
\item \code{0 <= guessing <= 1}
\item \code{0 <= upper <= 1}
\item \code{guessing < upper}
}

(2) \strong{Polytomous models.}

The supported polytomous models include \code{"GRM"}, \code{"MGRM"},
\code{"PCM"}, \code{"GPCM"}, \code{"RSM"}, and \code{"NRM"}. Let
\eqn{K} denotes the number of non-baseline response
categories.
Required parameters depend on the specific model and may include
discrimination parameters and category-specific thresholds or step
parameters (e.g., \code{betaj1}, \dots, \code{betajK},
\code{deltaj1}, \dots, \code{deltajK}). See \code{Pi_internal()}.
}
\examples{
## Example 1: Dichotomous model
data("mini_itempool")
compute_icc(mini_itempool,list("3PL"=c("discrimination","difficulty","guessing")),
            theta = c(-1,0,1),model_col = "model",D = 1.7)

## Example 2: Polytomous model (PCM)
data("poly_itempool")
compute_icc(poly_itempool,list("PCM"=c("deltaj1","deltaj2","deltaj3")),
            theta = c(-1,0,1),model_col = "model")

## Example 3: multiple IRT models (3PL + GPCM + GRM)
data("Rmst_pool")
compute_icc(Rmst_pool,item_par_cols = list("3PL"=c("a","b","c"),
                                           "GPCM" = c("alpha","delta1","delta2","delta3"),
                                            "GRM" = c("alpha","beta1","beta2")),
            theta = c(-1,0,1),model_col = "model")
}
