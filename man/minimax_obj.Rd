% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/minimax_obj.R
\name{minimax_obj}
\alias{minimax_obj}
\title{Minimize the common maximum deviation from target goals}
\usage{
minimax_obj(x, multiple_terms, strategy_args = list())
}
\arguments{
\item{x}{An object of class \code{mstATA_design} created by \code{mst_design()}.}

\item{multiple_terms}{A list of objective terms created by \code{objective_term()}.
The list must contain \strong{two or more} objective terms.
All objective terms must be \strong{absolute (goal-based) objectives}
(i.e., \code{goal} must be specified and non-\code{NULL}).}

\item{strategy_args}{A named list of strategy-specific arguments used by the
\strong{minimax} aggregation.

Supported fields:
\itemize{
\item \code{mode} — Character string specifying the deviation formulation.
Must be either \code{"one_dev"} (single absolute deviation) or
\code{"two_dev"} (separate positive and negative deviations).
}}
}
\value{
An object of S3 class \code{"compiled_objective"} with named elements:
\describe{
\item{name}{A string indicating the objective function name.}
\item{A_binary}{A sparse constraint matrix (class \code{"Matrix"}) for binary
decision variables. Rows correspond to constraints; columns correspond to
binary decision variables.}
\item{A_real}{A sparse constraint matrix (class \code{"Matrix"}) for
continuous decision variables. Must have the same number of rows as
\code{A_binary}.}
\item{operators}{A character vector of constraint operators, one per row of \code{A_binary}.}
\item{d}{A numeric vector of right-hand-side values for the constraints.}
\item{C_binary}{A numeric vector of objective coefficients for binary decision
variables.}
\item{C_real}{A numeric vector of objective coefficients for continuous
decision variables.}
\item{sense}{Always \code{"min"} for the minimax strategy.}
\item{decisionvar_type_new}{Types of auxiliary variables (continuous).}
\item{decisionvar_name_new}{Names of auxiliary variables.}
\item{notes}{Metadata including strategy name and deviation mode.}
}
}
\description{
Implements a \strong{minimax (goal-based)} objective that minimizes a common
ceiling on deviations from multiple target values.

Let there be \eqn{K} objective terms with linear scores
\eqn{y_k = a_k^\top x} and target values \eqn{g_k}.
The minimax objective minimizes the \emph{largest deviation} from these targets
across all terms.

A common deviation variable is introduced so that no objective deviates
from its target by more than this value.
}
\details{
\strong{1. Overview}

Each objective term is created using \code{objective_term()} and represents
a linear score of the form:

\deqn{
  y_k = a_k^\top x,
}

where \eqn{a_k} is a coefficient vector defined by the attribute,
attribute level, and application scope, and \eqn{x} denotes the
item–module–panel decision variables.

Each term has an associated target value \eqn{g_k}.

The minimax strategy seeks a solution that minimizes the \emph{worst-case}
deviation across all objective terms.

Key characteristics for each objective term:

(1) Categorical or Quantitative

\itemize{
\item \strong{Categorical}: deviation from a target number of items
belonging to a specified category level;
\item \strong{Quantitative}: deviation from a target sum of quantitative
item attributes (e.g., difficulty, discrimination, or item information).
}

(2) Applied at One of Three Levels

\itemize{
\item \strong{"Module-level"} — only items in a specified module contribute;
\item \strong{"Pathway-level"} — items in all modules belonging to a pathway
contribute; and
\item \strong{"Panel-level"} — all item selections in the panel contribute.
}

(3) Only Absolute Objectives

The minimax strategy applies only to absolute (goal-based) objectives.
Relative objectives without targets are not supported.

\strong{2. Deviation modes}

Two equivalent deviation formulations are supported via
\code{strategy_args$mode}:

\itemize{

\item \strong{One-deviation mode} (\code{mode = "one_dev"}):

Introduces a single nonnegative deviation variable \eqn{d \ge 0}
representing the \strong{largest absolute deviation} across all objectives.

For each objective term:

\deqn{
    |a_k^\top x - g_k| \le d.
  }

The optimization problem is:

\deqn{
    \min \; d.
  }

\item \strong{Two-deviation mode} (\code{mode = "two_dev"}):

Introduces two nonnegative deviation variables:
\eqn{d^+ \ge 0} (maximum overflow) and
\eqn{d^- \ge 0} (maximum shortage).

For each objective term:

\deqn{
    a_k^\top x - g_k \le d^+, \qquad
    g_k - a_k^\top x \le d^-.
  }

The optimization problem is:

\deqn{
    \min \; (d^+ + d^-).
  }
}

\strong{Interpretation}

\itemize{
\item \eqn{d} (one-dev) measures the largest absolute deviation from any target;
\item \eqn{d^+} measures the largest amount by which any objective exceeds its target;
\item \eqn{d^-} measures the largest amount by which any objective falls short of its target.
}
}
\section{Mathematical Formulation}{


For \eqn{k = 1, \ldots, K}, let

\deqn{
  y_k = a_k^\top x,
}

where:

\itemize{
\item \eqn{a_k} is the coefficient vector defined by the objective term;
\item \eqn{x} is the vector of binary item–module–panel decision variables;
\item \eqn{g_k} is the target value specified by the test developer.
}

The minimax objective minimizes the maximum deviation across all objectives
by introducing auxiliary deviation variables and solving a linear program
that controls the worst-case mismatch.
}

\examples{
data("mini_itempool")

test_mstATA <- mst_design(
  itempool        = mini_itempool,
  design          = "1-3-3",
  exclude_pathway = c("1-1-3", "1-3-1"),
  pathway_length  = 8
)

obj1 <- objective_term(
  x = test_mstATA,
  attribute = "iif(theta=-1)",
  applied_level = "Module-level",
  which_module = 1,
  sense = "min",
  goal = 12
)

obj2 <- objective_term(
  x = test_mstATA,
  attribute = "iif(theta=0)",
  applied_level = "Module-level",
  which_module = 1,
  sense = "min",
  goal = 15
)

obj3 <- objective_term(
  x = test_mstATA,
  attribute = "iif(theta=1)",
  applied_level = "Module-level",
  which_module = 1,
  sense = "min",
  goal = 12
)

# One-deviation minimax
minimax_obj(x = test_mstATA,
           multiple_terms = list(obj1,obj2,obj3),
           strategy_args = list(mode = "one_dev"))

# Two-deviation minimax
minimax_obj(x = test_mstATA,
            multiple_terms = list(obj1,obj2,obj3),
            strategy_args = list(mode = "two_dev"))

}
