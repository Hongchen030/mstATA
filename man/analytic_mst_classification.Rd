% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analytic_mst_classification.R
\name{analytic_mst_classification}
\alias{analytic_mst_classification}
\title{Analytic classification accuracy and consistency for MST panels}
\usage{
analytic_mst_classification(decision_theta_cuts, eval_tb, theta_weight)
}
\arguments{
\item{decision_theta_cuts}{Numeric vector of classification cut theta values.
These define \eqn{K+1} ordered classification levels.}

\item{eval_tb}{A data frame containing at least the columns \code{theta} and \code{csem}.
It can be created by \code{analytic_mst_precision()} or \code{analytic_mst_precision_items()}}

\item{theta_weight}{A data frame containing the population distribution
over the ability grid. It must have the following columns:
\describe{
\item{theta}{Numeric ability grid. This must match
\code{eval_tb$theta} exactly.}
\item{w}{Non-negative population weights corresponding to each
ability value.}
}
The \code{theta_weight} object can be generated using
\code{\link{gen_weight}}.}
}
\value{
A list with the following components:
\describe{
\item{confusion}{A matrix giving the joint probability of true and expected
classification levels. Rows correspond to true levels; columns correspond
to expected levels.}
\item{marginal}{A data frame of marginal classification accuracy and
consistency by true level, including an overall (marginal) row.}
\item{conditional}{A data frame of conditional accuracy and consistency
at each ability value \eqn{\theta}.}
\item{prob.level}{A data frame of conditional classification probabilities
for each level at each \eqn{\theta}.}
\item{cutscore}{The classification cut scores used in the analysis.}
}
}
\description{
Once the analytical CSEMs are derived based on recursion-based approach (Lim, 2000),
the classification accuracy of MST can be estimated using Rudner's method (2000,2005).
The implementation follows the same logic as \code{irtQ::cac_rud()}.
}
\details{
This function evaluates classification performance without simulation.
Given a set of decision cut scores and conditional standard errors across
a fixed ability grid, classification accuracy and consistency are computed
analytically by integrating conditional classification probabilities over
a population ability distribution.

The procedure consists of the following steps:

\enumerate{
\item \strong{Define true classification levels:}
Each ability value \eqn{\theta} on the evaluation grid is assigned to a
true classification level based on the specified cut scores.

\item \strong{Compute conditional classification probabilities:}
For each \eqn{\theta}, the probability of being classified into each level
is computed assuming a normal distribution for the reported ability
estimate:
\deqn{
    \hat{\theta} \mid \theta \sim \mathcal{N}(\theta,\ \mathrm{CSEM}(\theta)^2).
  }

\item \strong{Conditional accuracy and consistency:}

Conditional classification accuracy is defined as
\deqn{
    P(\hat{C} = C \mid \theta),
  }
where \eqn{C} is the true classification level.

Conditional consistency is defined as
\deqn{
    \sum_k P(\hat{C} = k \mid \theta)^2,
  }
representing the probability that two independent parallel administrations
yield the same classification.

\item \strong{Marginalization over the population:}

Conditional indices are integrated over a population ability distribution
using externally supplied weights, yielding marginal classification
accuracy, marginal classification consistency, and a confusion matrix.
}
}
\section{Mathematical Formulation}{


Let \eqn{\theta_i} denote an ability grid point and
\eqn{\mathrm{CSEM}(\theta_i)} the corresponding conditional standard error.
For classification cut scores \eqn{c_1, \dots, c_K}, define level boundaries
\eqn{(-\infty, c_1, \dots, c_K, \infty)}.

The probability of classifying an examinee with true ability \eqn{\theta_i}
into level \eqn{k} is
\deqn{
  P(\hat{C}=k \mid \theta_i) =
  \Phi\!\left(\frac{u_k - \theta_i}{\mathrm{CSEM}(\theta_i)}\right)
  -
  \Phi\!\left(\frac{\ell_k - \theta_i}{\mathrm{CSEM}(\theta_i)}\right),
}
where \eqn{(\ell_k, u_k)} is the interval for level \eqn{k}.

Conditional accuracy at \eqn{\theta_i} is
\deqn{
  P(\hat{C}=C \mid \theta_i),
}
and conditional consistency is
\deqn{
  \sum_{k=1}^{K+1} P(\hat{C}=k \mid \theta_i)^2.
}

Let \eqn{w(\theta_i) \ge 0} be population weights on the grid, with
\eqn{\sum_{i=1}^{I} w(\theta_i)=1}. The marginal (population) indices are the
discrete weighted averages of the conditional quantities:

\deqn{
\mathrm{MarginalAccuracy}
\;=\;
\sum_{i=1}^{I} w(\theta_i)\;
P\!\left(\hat{C}=C(\theta_i)\mid \theta_i\right),
}
where \eqn{C(\theta_i)} is the true level implied by \eqn{\theta_i} and the cut
scores.

\deqn{
\mathrm{MarginalConsistency}
\;=\;
\sum_{i=1}^{I} w(\theta_i)\;
\sum_{k=1}^{K+1} P\!\left(\hat{C}=k \mid \theta_i\right)^2.
}

If \eqn{w(\theta_i)} approximates a density \eqn{g(\theta)}, these correspond to
the integrals \eqn{\int g(\theta)\,\cdot\, d\theta}.
}

\references{
Rudner, L. M. (2000). Computing the expected proportions of misclassified examinees.
\emph{Practical Assessment, Research, and Evaluation}, 7(1).
\href{https://doi.org/10.7275/an9m-2035}{doi:10.7275/an9m-2035}

Rudner, L. M. (2005). Expected classification accuracy.
\emph{Practical Assessment, Research, and Evaluation}, 10(1).
\href{https://doi.org/10.7275/56a5-6b14}{doi:10.7275/56a5-6b14}
}
\seealso{
\code{\link[=gen_weight]{gen_weight()}},
\code{\link[=analytic_mst_precision]{analytic_mst_precision()}},
\code{\link[=analytic_mst_precision_items]{analytic_mst_precision_items()}}
}
