% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils-helper_compile_goal_programming_.R
\name{compile_goal_programming_}
\alias{compile_goal_programming_}
\title{Compile a Goal Programming Objective}
\usage{
compile_goal_programming_(
  x,
  obj_set,
  strategy = "goal_programming",
  strategy_args = list()
)
}
\arguments{
\item{x}{An object of class \code{mstATA_design} created by \code{mst_design()}.}

\item{obj_set}{A list containing multiple \code{objective_term()}
object. The function will throw an error if the list does not have
length greater than 1. Each term must be a \emph{absolute} objective (i.e., with goal values).}

\item{strategy}{A character string specifying the optimization strategy.
Currently, only \code{"goal_programming"} is supported.}

\item{strategy_args}{A list of strategy-specific arguments. For the \code{"goal_programming"}
strategy, \code{strategy_args} must be either an empty list or
\code{list(mode = mode, weights = weights)}. The argument \code{mode} must
be either \code{"one_dev"} or \code{"two_dev"}. If not provided, \code{"one_dev"}.
\code{weights} must be a positive numeric vector of length \code{length(obj_set)}. If not provided,
\code{weights} defaults to \code{rep(1, length(obj_set))}.}
}
\value{
A list of class \code{"compiled_objective"}
\describe{
\item{name}{A character vector indicating the specifications in each row of \code{A_binary}}
\item{specification}{A \code{data.frame} summarizing the constraint specification, including
the requirement name, attribute, constraint type, application level,
operator, and the number of constraint rows generated.}
\item{A_binary}{Sparse matrix of coefficients for binary decision variables.}
\item{A_real}{Sparse matrix of coefficients for real decision variables.}
\item{operators}{A character vector of constraint operators, one per row of \code{A_binary}.}
\item{d}{A numeric vector of right-hand-side values for the constraints.}
\item{C_binary}{Penalty vector for binary variables (if any)}
\item{C_real}{Penalty vector for real variables (if any)}
\item{sense}{Always \code{"min"} for the goal_programming strategy.}
\item{decisionvar_name_new}{Character vector indicating the names of new decision variables, same length as \code{ncol(A_real)}.}
\item{decisionvar_type_new}{A character vector of \code{"C"} (continuous), same length as \code{ncol(A_real)}.}
\item{notes}{A list containing the strategy name, strategy arguments, and \code{y_bounds}.}
}
}
\description{
This internal helper constructs the compiled objective structure used by the
solver when the optimization problem follows a \strong{goal programming} strategy.

Goal programming minimizes deviations between achieved objective values and
user-specified target goals. Each objective term contributes a deviation
variable, and the solver minimizes a (weighted) sum of these deviations.

This function is automatically called by \code{compile_objective()} when
\code{strategy = "goal_programming"}.
}
\details{
\strong{Optimization Form}

Let there be K objective terms, each defined as a linear score

\deqn{
  y_k = a_k^\top x, \quad k = 1, \ldots, K,
}

where \eqn{a_k} is the coefficient vector constructed by
\code{objective_term()}, and x denotes the item–module–panel
decision variables.

Each term has a target value \eqn{g_k}. Goal programming minimizes deviations
between \eqn{y_k} and \eqn{g_k}.
\deqn{\min \; \sum_k w_k d_k}

where \eqn{w_k > 0} are user-specified or default weights.

Two deviation modes are supported:

\itemize{
\item \strong{One-deviation mode} (\code{mode = "one_dev"}):
Introduces a single non-negative deviation variable \eqn{d_k \ge 0} per objective term such that
\deqn{
    |a_k^\top x - g_k| \le d_k.
  }

\item \strong{Two-deviation mode} (\code{mode = "two_dev"}):
Introduces separate positive and negative deviations
\eqn{d_k^+ \ge 0} and \eqn{d_k^- \ge 0}, with
\deqn{
    a_k^\top x - g_k = d_k^+ - d_k^-.
  }
}

\strong{Interpretation}
The compiled objective minimizes a weighted sum of deviations:

\deqn{
  \min \sum_{k=1}^K w_k \, d_k
}

in one-deviation mode, or

\deqn{
  \min \sum_{k=1}^K w_k \, (d_k^+ + d_k^-)
}

in two-deviation mode, where \eqn{w_k} are user-specified or default weights.

All goal programming objectives are compiled as \strong{minimization} problems.
}
\keyword{internal}
