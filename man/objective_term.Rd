% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/objective_term.R
\name{objective_term}
\alias{objective_term}
\title{Create a Single Linear Objective Term}
\usage{
objective_term(
  x,
  attribute,
  cat_level = NULL,
  applied_level = c("Module-level", "Pathway-level", "Panel-level"),
  which_module = NULL,
  which_pathway = NULL,
  sense = "max",
  goal = NULL
)
}
\arguments{
\item{x}{An object of class \code{"mstATA_design"} created by \code{\link[=mst_design]{mst_design()}}.}

\item{attribute}{A string giving the column name in \code{x$ItemPool} that contains
the attribute used in the objective term. This may be categorical or
quantitative.}

\item{cat_level}{A character string or \code{NULL}.
If a character string is supplied, the attribute is treated as categorical
and the objective counts items belonging to this category.
If \code{NULL}, the attribute is treated as quantitative and the objective uses
the numeric attribute values.}

\item{applied_level}{One of:
\code{"Module-level"}, \code{"Pathway-level"}, \code{"Panel-level"}.
See \emph{Details} for the rules governing module/pathway selection.}

\item{which_module}{Integer scalar specifying the module to which the
objective applies (only permitted when \code{applied_level = "Module-level"}).}

\item{which_pathway}{Integer scalar specifying the pathway to which the
objective applies (only permitted when \code{applied_level = "Pathway-level"}).}

\item{sense}{One of \code{"max"} or \code{"min"}.
For absolute deviation objectives, \code{"min"} is enforced automatically.}

\item{goal}{Optional numeric scalar. If supplied, the objective minimizes the
absolute deviation from the target:
\deqn{ |a^\top x - \text{goal}| }
If \code{NULL}, a standard maximize/minimize objective is created.}
}
\value{
An object of class \code{"mstATA_objective"} with components:
\describe{
\item{name}{Character description of the objective term.}
\item{coef_val}{A 1-row sparse matrix containing the objective coefficients.}
\item{goal}{The target value for absolute deviation objectives, or \code{NULL}.}
\item{sense}{The optimization direction (\code{"max"} or \code{"min"}).}
}
}
\description{
Creates a linear objective term of the form \eqn{a^\top x}, where the vector
\eqn{a} represents categorical or quantitative attribute values for the
involved items (or stimuli), and the decision variables \eqn{x} represent
item selections within a single MST panel.

Depending on the attribute supplied, the objective can target:
\itemize{
\item maximize or minimize the number of items belong to a specific category level, or
\item maximize or minimize the sum of quantitative attribute values across items
(e.g., difficulty, IIF values, discrimination).
}

Objective terms may be applied at three hierarchical levels:
\itemize{
\item \strong{"Module-level"} — aggregates only items belonging to one
specific module;

\item \strong{"Pathway-level"} — aggregates items in all modules that compose
a single MST pathway; and

\item \strong{"Panel-level"} — aggregates all item selections across all
modules in a panel.
}

The function supports two types of objectives:
\itemize{
\item \strong{Relative objective} – maximize or minimize \eqn{a^\top x}.
\item \strong{Absolute deviation objective} – minimize \eqn{|a^\top x - \text{goal}|}.
}
}
\details{
\strong{1. Application scope}

\itemize{

\item \strong{Module-level:}
\code{which_module} must be supplied and must be a scalar.
\code{which_pathway} must be \code{NULL}.

\item \strong{Pathway-level:}
\code{which_pathway} must be supplied and must be a scalar.
\code{which_module} must be \code{NULL}.

\item \strong{Panel-level:}
Neither \code{which_module} nor \code{which_pathway} may be supplied.

}

\strong{2. Objective meaning}

If \code{cat_level = NULL}, the vector \eqn{a} consists of quantitative attribute
values.
If \code{cat_level} is specified, \eqn{a} is an indicator vector for items in the
corresponding category.

The objective term therefore represents:

\itemize{
\item the \strong{sum of attribute values} (quantitative), or
\item the \strong{count of items} in a category (categorical).
}
}
\examples{
data("mini_itempool")
test_mstATA <- mst_design(
  itempool       = mini_itempool,
  design         = "1-3-3",
  exclude_pathway = c("1-1-3","1-3-1"),
  pathway_length = 8
)

# Example 1: Maximize information at $\theta$ = 0 in the routing module
objective_term(
  x = test_mstATA,
  attribute = "iif(theta=0)",
  cat_level = NULL,
  applied_level = "Module-level",
  which_module = 1,
  sense = "max"
)

# Example 2: Target a test information value at $\theta$ = -1 for pathway 1
objective_term(
  x = test_mstATA,
  attribute = "iif(theta=-1)",
  cat_level = NULL,
  applied_level = "Pathway-level",
  which_pathway = 1,
  sense = "max",
  goal = 10
)

# Example 3: Maximize the number of MC items in a panel
objective_term(
  x = test_mstATA,
  attribute = "itemtype",
  cat_level = "MC",
  applied_level = "Panel-level",
  sense = "max"
)

}
