% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/enemystim_exclu_con.R
\name{enemystim_exclu_con}
\alias{enemystim_exclu_con}
\title{Generate Pathway-Level Constraints to Prevent Enemy Stimuli
from Appearing Together}
\usage{
enemystim_exclu_con(x)
}
\arguments{
\item{x}{An object of class \code{"mstATA_design"} created by \code{mst_design()}.}
}
\value{
An object of S3 class \code{"mstATA_constraint"} with named elements:
\describe{
\item{name}{A character vector indicating the specifications in each row of \code{A_binary}}
\item{specification}{A \code{data.frame} summarizing the constraint specification, including
the requirement name, attribute, constraint type, application level,
operator, and the number of constraint rows generated.}
\item{A_binary}{A sparse binary matrix representing the linear constraint coefficients.}
\item{A_real}{NULL for 'mstATA_constraint' object}
\item{operators}{A character vector of constraint operators, one per row of \code{A_binary}.}
\item{d}{A numeric vector of right-hand-side values for the constraints.}
\item{C_binary}{NULL for 'mstATA_constraint' object}
\item{C_real}{NULL for 'mstATA_constraint' object}
\item{sense}{NULL for 'mstATA_constraint' object}
}
}
\description{
Constructs linear constraints to ensure that stimuli belonging to the
same \emph{enemy set} do \strong{not} appear together within any MST pathway (i.e.,
any complete test form).

Enemy stimuli are stimuli that should not be viewed by the same examinee for security or fairness reasons.

The total number of constraints = number of enemy stimulus sets * number of pathways.
}
\details{
\strong{1. Specification}

The enforced constraint is:

\strong{At most one stimulus from the same enemy set can be selected in a pathway}

\itemize{
\item The attribute is a \emph{itemset-level logical grouping}: enemystim_set defines enemy stimulus groups in the
item pool.
\item The constraint must be applied at \strong{"Pathway-level"}.
Because each pathway represents the full sequence of modules that an examinee
could encounter, preventing enemy stimuli from appearing in a pathway ensures
that no examinee can see more than one stimulus from the same enemy set.
}

\strong{2. Logical Interpretation}

For an enemy stimulus set \eqn{V_e^{stim}}:If a stimulus in the set is selected anywhere in the pathway,
all other stimuli in the same set must be excluded from that pathway.

This ensures that \strong{at most one} stimulus from each enemy group appears in any
assembled test form.
}
\section{Mathematical Formulation}{


Suppose the item pool contains (S - 1) stimulus-based item sets, indexed by
\eqn{s = 1, \ldots, S - 1}. Each stimulus has a designated pivot item,
indexed by \eqn{i_s^{*}}. In addition, the pool contains a set of discrete
(nonâ€“stimulus-based) items, which are represented by a dummy stimulus
\eqn{s = S} to allow a unified indexing scheme. Items belonging to stimulus
\eqn{s} are indexed as \eqn{i_s = 1, 2, \ldots, I_s}.

Suppose there are \eqn{M} modules in an MST panel. Let
\eqn{m = 1, \ldots, M} denote the module index.

Let \eqn{V_e^{stim}} denotes a set of stimuli that are mutually exclusive (enemy).

\deqn{
  \sum_{m \in r} \sum_{s \in V_e^{stim}} x_{i_s^{*},m} \;\le\; 1 .
}

Here:

\itemize{
\item \eqn{x_{i_s^{*},m}} indicates whether the pivot item for stimulus
s is selected into module m, thereby indicating whether the
stimulus s is selected in that module.
\item \eqn{m \in r} denote modules belonging to pathway r.
}
}

\examples{
data("reading_itempool")

pivot_stim_map <- create_pivot_stimulus_map(
  itempool   = reading_itempool,
  stimulus   = "stimulus",
  pivot_item = "pivot_item"
)

# Create enemy-stimulus sets
enemystim_set<-create_enemy_sets(
  reading_itempool$stimulus,
  reading_itempool$enemy_stimulus,
  sep_pattern = ","
)

test_mstATA <- mst_design(
  itempool       = reading_itempool,
  design         = "1-3-3",
  module_length  = c(10,12,12,12,15,15,15),
  exclude_pathway = c("1-1-3", "1-3-1"),
  pivot_stim_map = pivot_stim_map,
  enemystim_set = enemystim_set
)

enemystim_exclu_con(x = test_mstATA)

}
\seealso{
\code{\link[=create_enemy_sets]{create_enemy_sets()}},
\code{\link[=concat_enemy_sets]{concat_enemy_sets()}},
\code{\link[=create_pivot_stimulus_map]{create_pivot_stimulus_map()}}
}
