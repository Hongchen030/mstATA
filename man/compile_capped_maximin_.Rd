% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils-helper_compile_capped_maximin_.R
\name{compile_capped_maximin_}
\alias{compile_capped_maximin_}
\title{Compile a Capped-Maximin Objective}
\usage{
compile_capped_maximin_(
  x,
  obj_set,
  strategy = "capped_maximin",
  strategy_args = list()
)
}
\arguments{
\item{x}{An object of class \code{mstATA_design} created by \code{mst_design()}.}

\item{obj_set}{A list containing multiple \code{objective_term()}
object. The function will throw an error if the list does not have
length greater than 1. Each term must be a \emph{relative} objective (i.e., no goal values).}

\item{strategy}{A character string specifying the optimization strategy.
Currently, only \code{"capped_maximin"} is supported.}

\item{strategy_args}{A list of strategy-specific arguments. For the \code{"capped_maximin"}
strategy, \code{strategy_args} must be either an empty list or
\code{list(proportions = proportions)}, where \code{proportions} is a positive
numeric vector of length \code{length(obj_set)}. If omitted, \code{proportions}
defaults to \code{rep(1, length(obj_set))}.}
}
\value{
A list of class \code{"compiled_objective"}
\describe{
\item{name}{A character vector indicating the specifications in each row of \code{A_binary}}
\item{specification}{A \code{data.frame} summarizing the constraint specification, including
the requirement name, attribute, constraint type, application level,
operator, and the number of constraint rows generated.}
\item{A_binary}{Sparse matrix of coefficients for binary decision variables.}
\item{A_real}{Sparse matrix of coefficients for real decision variables.}
\item{operators}{A character vector of constraint operators, one per row of \code{A_binary}.}
\item{d}{A numeric vector of right-hand-side values for the constraints.}
\item{C_binary}{A numeric vector of objective coefficients for binary decision
variables.}
\item{C_real}{A numeric vector of objective coefficients for continuous
decision variables.}
\item{sense}{Always \code{"max"} for the capped_maximin strategy.}
\item{decisionvar_name_new}{Character vector indicating the names of new decision variables, same length as \code{ncol(A_real)}.}
\item{decisionvar_type_new}{A character vector of \code{"C"} (continuous), same length as \code{ncol(A_real)}.}
\item{notes}{A list containing the strategy name, strategy arguments, and \code{y_bounds}.}
}
}
\description{
Implements the \strong{capped-maximin} objective aggregation strategy, which seeks to
maximize a common lower bound across multiple objective terms while penalizing
excessive deviation above that bound.

The capped-maximin strategy balances multiple competing objectives by maximizing
the worst-performing (scaled) objective, while allowing limited flexibility
through an overflow parameter.

This function is automatically called by \code{compile_objective()} when
\code{strategy = "capped_maximin"}.
}
\details{
\subsection{Optimization Formulation}{

Let there be \eqn{K} objective terms, each defined by a linear score:

\deqn{
  y_k = a_k^\top x, \quad k = 1, \ldots, K,
}

where:

\itemize{
\item \eqn{a_k} is the coefficient vector constructed by
\code{objective_term()};
\item \eqn{x} denotes the binary item–module–panel decision variables;
\item \eqn{p_k > 0} is a user-specified proportions that scales the relative
importance of objective \eqn{k}.
}

The capped-maximin strategy introduces two auxiliary continuous variables:

\itemize{
\item \eqn{y}, representing a common lower bound on the scaled objective values;
\item \eqn{\delta}, representing the maximum allowed overflow above this bound.
}

The optimization problem is:

\deqn{
  \max \; y - \delta
}

subject to the constraints:

\deqn{
  p_k\, y \;\le\; a_k^\top x \;\le\; p_k\, y + \delta,
  \quad k = 1, \ldots, K.
}

This formulation ensures that all objective scores are kept close to a common
proportional baseline, while allowing controlled deviation when perfect balance
is infeasible.
}

\subsection{Interpretation}{

\itemize{
\item The variable \eqn{y} captures the \emph{worst-case} normalized objective value
across all terms.

\item The variable \eqn{\delta} controls how much any objective is allowed to
exceed its proportional share.

\item Maximizing \eqn{y - \delta} simultaneously encourages fairness across
objectives and limits excessive dominance by any single objective.
}

Compared to standard maximin, capped-maximin provides greater numerical stability
and flexibility, especially when objective terms differ substantially in scale.
}
}
\keyword{internal}
