% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils-helper_compile_maximin_.R
\name{compile_maximin_}
\alias{compile_maximin_}
\title{Compile a Maximin Objective}
\usage{
compile_maximin_(x, obj_set, strategy = "maximin", strategy_args = list())
}
\arguments{
\item{x}{An object of class \code{mstATA_design} created by \code{mst_design()}.}

\item{obj_set}{A list containing multiple \code{objective_term()}
objects. The function will throw an error if the list does not have
length greater than 1. Each term must be a \emph{relative} objective (i.e., no goal values).}

\item{strategy}{A character string specifying the optimization strategy.
Currently, only \code{"maximin"} is supported.}

\item{strategy_args}{A list of strategy-specific arguments. For the \code{"maximin"} strategy,
\code{strategy_args} must be either an empty list or
\code{list(proportions = proportions, delta = delta)}.

The argument \code{proportions} must be a positive numeric vector of length
\code{length(obj_set)}. If not provided, it defaults to
\code{rep(1, length(obj_set))}.

The argument \code{delta} controls overflow and may be a positive numeric
value or \code{Inf}. It must have length 1 or \code{length(obj_set)}.
If not provided, \code{delta} defaults to \code{Inf}, in which case no
overflow control is applied.}
}
\value{
A list of class \code{"compiled_objective"}
\describe{
\item{name}{A character vector indicating the specifications in each row of \code{A_binary}}
\item{specification}{A \code{data.frame} summarizing the constraint specification, including
the requirement name, attribute, constraint type, application level,
operator, and the number of constraint rows generated.}
\item{A_binary}{Sparse matrix of coefficients for binary decision variables.}
\item{A_real}{Sparse matrix of coefficients for real decision variables.}
\item{operators}{A character vector of constraint operators, one per row of \code{A_binary}.}
\item{d}{A numeric vector of right-hand-side values for the constraints.}
\item{C_binary}{Penalty vector for binary variables (if any)}
\item{C_real}{Penalty vector for real variables (if any)}
\item{sense}{Always \code{"max"} for the maximin strategy.}
\item{decisionvar_name_new}{Character vector indicating the names of new decision variables, same length as \code{ncol(A_real)}.}
\item{decisionvar_type_new}{A character vector of \code{"C"} (continuous), same length as \code{ncol(A_real)}.}
\item{notes}{A list containing the strategy name, strategy arguments, and \code{y_bounds}.}
}
}
\description{
Implements the \strong{maximin} objective aggregation strategy, which maximizes the
minimum normalized score across multiple objective terms.

The optimization problem is:

\deqn{
  \max \; \min_{k = 1,\ldots,K} \left( \frac{a_k^\top x}{p_k} \right),
}

where each objective term is a linear score \eqn{a_k^\top x}, and
\eqn{p_k > 0} is a user-specified (or default) proportions that scales the
relative importance of term \eqn{k}.

This function is automatically called by \code{compile_objective()} when
\code{strategy = "maximin"}.
}
\details{
\strong{Optimization Formulation}

Let there be \eqn{K} objective terms, each defined as a linear score:

\deqn{
  y_k = a_k^\top x, \quad k = 1, \ldots, K,
}

where:

\itemize{
\item \eqn{a_k} is the coefficient vector constructed by
\code{objective_term()};
\item \eqn{x} denotes the binary item–module–panel decision variables;
\item \eqn{p_k > 0} is the proportions used to normalize objective \eqn{k}.
}

The maximin strategy introduces a common auxiliary variable \eqn{y} representing
the minimum normalized score across all objectives, and maximizes this value.

\deqn{
  \max \; y
}

subject to:

\deqn{
  \frac{a_k^\top x}{p_k} \ge y, \quad k = 1, \ldots, K.
}
\subsection{Overflow Control via \code{delta}}{

Two formulations are supported depending on the value of \code{delta}.

\itemize{

\item \strong{Without overflow control} (\code{delta = Inf}):

\deqn{
    a_k^\top x \ge p_k \, y, \quad k = 1, \ldots, K.
  }

This is the classical maximin formulation, which only enforces a lower bound
on each objective term.

\item \strong{With overflow control} (\code{delta < Inf}):

\deqn{
    p_k \, y \le a_k^\top x \le p_k \, y + \delta_k,
    \quad k = 1, \ldots, K.
  }

This bounded formulation prevents any single objective from excessively
exceeding the common minimum by more than \eqn{\delta_k}, improving numerical
stability and solution balance.

It is worth noting that when \code{delta} is included, the key difference
between the \code{"capped_maximin"} and \code{"maximin"} strategies lies in
how \code{delta} is treated in the optimization formulation.

For \code{"capped_maximin"}, \code{delta} appears directly in the objective function.
In contrast, for
\code{"maximin"}, \code{delta} does not appear in the objective function.
}
}
}
\keyword{internal}
